<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#6366F1">
  <title>Pokemon Math World</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <!-- WORLD SELECT SCREEN -->
    <div class="screen active" id="worldSelectScreen">
      <div class="world-select">
        <div class="world-logo">Pokemon Math World</div>
        <div class="world-subtitle">Choose your adventure!</div>

        <div class="level-cards">
          <div class="level-card trainer-school" onclick="selectLevel('trainer-school')">
            <div class="level-badge badge-easy">Beginner</div>
            <div class="level-header">
              <span class="level-icon">üéí</span>
              <span class="level-title">Trainer School</span>
            </div>
            <div class="level-desc">Start your Pokemon journey! Simple addition problems to catch your first Pokemon.</div>
            <div class="level-features">
              <span class="feature-tag">Addition 0-10</span>
              <span class="feature-tag">2 Choices</span>
              <span class="feature-tag">15 Pokemon</span>
            </div>
            <div class="level-progress" id="trainerSchoolProgress"></div>
          </div>

          <div class="level-card pokemon-league" onclick="selectLevel('pokemon-league')">
            <div class="level-badge badge-medium">Adventure</div>
            <div class="level-header">
              <span class="level-icon">üèÜ</span>
              <span class="level-title">Pokemon League</span>
            </div>
            <div class="level-desc">9 chapters with gym battles! Addition, subtraction, and missing numbers.</div>
            <div class="level-features">
              <span class="feature-tag">Add/Sub 0-25</span>
              <span class="feature-tag">3 Gym Battles</span>
              <span class="feature-tag">25+ Pokemon</span>
            </div>
            <div class="level-progress" id="pokemonLeagueProgress"></div>
          </div>

          <div class="level-card champions-road" onclick="selectLevel('champions-road')">
            <div class="level-badge badge-hard">Challenge</div>
            <div class="level-header">
              <span class="level-icon">üëë</span>
              <span class="level-title">Champion's Road</span>
            </div>
            <div class="level-desc">The ultimate challenge! Multiplication, division, and word problems await!</div>
            <div class="level-features">
              <span class="feature-tag">Add/Sub to 100</span>
              <span class="feature-tag">Multiply/Divide</span>
              <span class="feature-tag">Word Problems</span>
              <span class="feature-tag">Legendary Pokemon</span>
            </div>
            <div class="level-progress" id="championsRoadProgress"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- GAME SCREENS (dynamically populated) -->
    <div class="screen" id="setupScreen"></div>
    <div class="screen" id="chapterScreen"></div>
    <div class="screen" id="gameScreen"></div>
    <div class="screen" id="catchScreen"></div>
    <div class="screen" id="victoryScreen"></div>
  </div>

  <script type="module" src="js/main.js"></script>
  <script type="module">
    // Import and expose all screen functions globally
    import { selectLevel, backToWorld, updateLevelProgress } from './js/screens/world-select.js';
    import { renderSetupScreen, selectTrainer, selectStarter, startGame } from './js/screens/setup.js';
    import { renderChapterScreen, selectChapter, resetGame } from './js/screens/chapter.js';
    import { startBattle, submitAnswer, exitBattle } from './js/screens/battle.js';
    import { afterCatch } from './js/screens/catch.js';

    // Initialize on load
    updateLevelProgress();
  </script>
</body>
</html>
