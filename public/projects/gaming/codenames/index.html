<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Codenames</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Screen 1: Player Setup -->
  <div id="screen-player-setup" class="screen">
    <div class="setup-container">
      <h1 class="game-title">CODENAMES</h1>
      <p class="subtitle">Team Word Guessing Game</p>
      <div class="input-group">
        <input type="text" id="player-name-input" placeholder="Enter your name" maxlength="20" autocomplete="off">
        <div id="name-error" class="error-message hidden"></div>
      </div>
      <button id="btn-continue" class="btn btn-primary">Continue</button>
      <p class="hint">Press Enter to continue</p>
    </div>
  </div>

  <!-- Screen 2: Lobby -->
  <div id="screen-lobby" class="screen hidden">
    <div class="lobby-container">
      <div class="lobby-header">
        <h1 class="game-title-sm">CODENAMES</h1>
        <div class="player-info">
          <span id="lobby-player-name"></span>
          <a href="#" id="btn-change-name" class="link">Change Name</a>
        </div>
      </div>

      <div class="mode-selector">
        <label class="mode-option">
          <input type="radio" name="game-mode" value="words">
          <span class="mode-label">Words</span>
          <span class="mode-desc">5√ó5 ¬∑ 25 word cards</span>
        </label>
        <label class="mode-option">
          <input type="radio" name="game-mode" value="pictures" checked>
          <span class="mode-label">Pictures</span>
          <span class="mode-desc">5√ó4 ¬∑ 20 picture cards</span>
        </label>
        <label class="mode-option">
          <input type="radio" name="game-mode" value="diy">
          <span class="mode-label">DIY</span>
          <span class="mode-desc">5√ó4 ¬∑ custom images</span>
        </label>
      </div>
      <div class="btn-center">
        <button id="btn-create-game" class="btn btn-primary btn-wide">Create New Game</button>
      </div>

      <div class="lobby-section">
        <h2>Available Games</h2>
        <div id="game-list" class="game-list">
          <p class="empty-message">No games available</p>
        </div>
      </div>

      <div class="lobby-section">
        <h2>Join Game</h2>
        <div class="join-row">
          <input type="text" id="join-code-input" placeholder="Enter game code" maxlength="6" autocomplete="off">
          <button id="btn-join-code" class="btn btn-secondary">Join</button>
        </div>
        <div id="join-error" class="error-message hidden"></div>
      </div>

      <div class="lobby-section">
        <h2>Game History</h2>
        <div id="history-container" class="history-list">
          <p class="empty-message">No completed games yet</p>
        </div>
        <button id="toggle-history-btn" class="btn btn-link" style="display: none;">Show More</button>
      </div>
    </div>
  </div>

  <!-- Screen 3: Game Room (setup / playing / finished phases) -->
  <div id="screen-game-room" class="screen hidden">
    <div class="game-room-container">

      <!-- Game Header -->
      <div class="game-header">
        <div class="game-header-left">
          <span id="game-display-name" class="game-name"></span>
          <span id="game-code" class="game-code"></span>
          <span id="local-player-info" class="local-player-info"></span>
        </div>
        <div class="game-header-right">
          <button id="btn-leave-game" class="btn btn-link btn-sm">Leave</button>
        </div>
      </div>

      <!-- Phase: Setup -->
      <div id="phase-setup" class="phase">
        <p class="phase-instruction">Pick your team and role, then the host starts the game.</p>
        <div class="teams-container">
          <!-- Red Team -->
          <div class="team-panel team-red">
            <h3 class="team-title red">Red Team</h3>
            <div class="role-section">
              <label>Spymaster</label>
              <div id="red-spymaster-slot" class="role-slot" data-team="red" data-role="spymaster">
                <span class="slot-empty">Empty</span>
              </div>
            </div>
            <div class="role-section">
              <label>Operatives</label>
              <div id="red-operatives" class="operatives-list"></div>
              <button class="btn btn-sm btn-outline-red btn-join-operative" data-team="red" data-role="operative">+ Join as Operative</button>
            </div>
          </div>
          <!-- Blue Team -->
          <div class="team-panel team-blue">
            <h3 class="team-title blue">Blue Team</h3>
            <div class="role-section">
              <label>Spymaster</label>
              <div id="blue-spymaster-slot" class="role-slot" data-team="blue" data-role="spymaster">
                <span class="slot-empty">Empty</span>
              </div>
            </div>
            <div class="role-section">
              <label>Operatives</label>
              <div id="blue-operatives" class="operatives-list"></div>
              <button class="btn btn-sm btn-outline-blue btn-join-operative" data-team="blue" data-role="operative">+ Join as Operative</button>
            </div>
          </div>
        </div>
        <div id="setup-errors" class="error-message hidden"></div>
        <div class="setup-actions">
          <button id="btn-start-game" class="btn btn-primary btn-wide hidden">Start Game</button>
          <button id="btn-cancel-game-setup" class="btn btn-danger-sm hidden">Cancel Game</button>
        </div>
      </div>

      <!-- Mid-game team picker overlay -->
      <div id="mid-game-picker" class="mid-game-picker hidden">
        <div class="picker-box">
          <h3>Pick a Team</h3>
          <p>Game is in progress. Join as operative:</p>
          <div class="picker-buttons">
            <button class="btn btn-picker-red" data-pick-team="red">Join Red Team</button>
            <button class="btn btn-picker-blue" data-pick-team="blue">Join Blue Team</button>
          </div>
        </div>
      </div>

      <!-- Phase: Playing -->
      <div id="phase-playing" class="phase hidden">
        <!-- Player Roster (at top) -->
        <div id="player-roster" class="player-roster"></div>

        <!-- Game Status Panel -->
        <div class="game-status-panel">
          <div class="status-row-1">
            <span id="round-indicator" class="round-indicator">Round 1</span>
            <span class="score red">Red: <span id="red-score">0</span>/<span id="red-total">9</span></span>
            <span class="score blue">Blue: <span id="blue-score">0</span>/<span id="blue-total">8</span></span>
            <button id="btn-cancel-game" class="btn btn-danger-sm hidden">Cancel Game</button>
          </div>
          <div id="action-prompt" class="action-prompt">Waiting for game to start...</div>
        </div>

        <!-- Clue Area (below status, above board) -->
        <div id="clue-area" class="clue-area">
          <!-- Spymaster input (shown only to active spymaster during clue phase) -->
          <div id="clue-input-section" class="clue-input-section hidden">
            <div class="clue-input-row">
              <input type="text" id="clue-word-input" placeholder="One-word clue" maxlength="30" autocomplete="off">
              <div class="clue-number-buttons" id="clue-number-buttons">
                <button class="btn-clue-number" data-number="0">0</button>
                <button class="btn-clue-number" data-number="1">1</button>
                <button class="btn-clue-number" data-number="2">2</button>
                <button class="btn-clue-number" data-number="3">3</button>
                <button class="btn-clue-number" data-number="4">4</button>
                <button class="btn-clue-number" data-number="5">5</button>
                <button class="btn-clue-number" data-number="6">6</button>
                <button class="btn-clue-number" data-number="9" title="Unlimited">‚àû</button>
              </div>
              <button id="btn-give-clue" class="btn btn-primary">Give Clue</button>
            </div>
            <div id="clue-error" class="error-message hidden"></div>
          </div>
          <!-- Current clue display (shown to everyone during guess phase) -->
          <div id="current-clue-display" class="current-clue-display hidden">
            <span class="clue-label">Clue:</span>
            <span id="current-clue-word" class="clue-word"></span>
            <span id="current-clue-number" class="clue-number"></span>
            <span id="guesses-remaining" class="guesses-remaining"></span>
          </div>
          <!-- Status message -->
          <div id="status-message" class="status-message"></div>
          <!-- End guessing button -->
          <button id="btn-end-guessing" class="btn btn-secondary hidden">End Guessing</button>
        </div>

        <!-- Legend (spymaster only) -->
        <div id="board-legend" class="board-legend hidden">
          <div class="legend-item"><span class="legend-swatch swatch-red"></span> Red</div>
          <div class="legend-item"><span class="legend-swatch swatch-blue"></span> Blue</div>
          <div class="legend-item"><span class="legend-swatch swatch-neutral"></span> Neutral</div>
          <div class="legend-item"><span class="legend-swatch swatch-assassin"></span> ‚ò†Ô∏è Assassin</div>
        </div>

        <!-- Board -->
        <div id="board" class="board"></div>

        <!-- Inspiration Words Panel (Spymaster only) -->
        <div id="inspiration-panel" class="inspiration-panel hidden">
          <div class="inspiration-content">
            <button id="btn-regenerate-inspiration" class="btn btn-inspiration">‚ú® Inspire</button>
            <span class="inspiration-word" id="inspiration-word-1">‚Äî</span>
            <span class="inspiration-word" id="inspiration-word-2">‚Äî</span>
            <span class="inspiration-word" id="inspiration-word-3">‚Äî</span>
          </div>
        </div>

        <!-- Clue Log -->
        <div class="clue-log-section">
          <h3>Clue Log</h3>
          <div id="clue-log" class="clue-log"></div>
        </div>
      </div>

      <!-- Phase: Finished -->
      <div id="phase-finished" class="phase hidden">
        <div id="confetti-container" class="confetti-container"></div>
        <div class="winner-banner" id="winner-banner">
          <h2 id="winner-text"></h2>
          <p id="win-reason"></p>
        </div>
        <!-- Board -->
        <div id="finished-board" class="board board-finished"></div>
        <div class="clue-log-section">
          <h3>Clue Log</h3>
          <div id="finished-clue-log" class="clue-log"></div>
        </div>
        <div class="finished-actions">
          <button id="btn-rematch" class="btn btn-primary hidden">üîÑ Rematch (same teams)</button>
          <button id="btn-new-game" class="btn btn-primary hidden">New Game (reset teams)</button>
          <button id="btn-back-lobby" class="btn btn-secondary">Back to Lobby</button>
        </div>
      </div>

    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
